<!DOCTYPE html> 
<html> 
<head>
	<meta charset="utf-8"> 
	<title>Skarbiec Maniaków Gier</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link rel="icon" href="ManiacyGier.jpg">
	<style>
		body {
			background-color: rgb(26, 85, 17);
		}
	</style>
	<script>
		function getRandomInt(max) {
		  return Math.floor(Math.random() * max) + 1;
		}

		function mainHall() {
			window.location.href = "The_Main_Hall.html";
		}

		function oneClick() {
			document.getElementById("B1").onclick = "";
			document.getElementById("B1").style.marginLeft = "75px";
			document.getElementById("B2").style.display = "none";
			document.getElementById("OneTap").style.display = "block";
		}

		function twoClick() {
			document.getElementById("B2").onclick = "";
			document.getElementById("B2").style.marginLeft = "375px";
			document.getElementById("B1").style.display = "none";
			document.getElementById("TwoTap").style.display = "block";
		}

		let glitch = [2, 1, 3];
		let j=0;
		let k=1;

		function choosePath(choice) {
			console.log(choice);
			if (j>12)
			{
				document.getElementById("HintDiv").style.display = "block";
			}
			if (j>36)
			{
				document.getElementById("Hint1").textContent = "W tym momencie błąkasz się po lesie bez celu. Powinnaś wrócić po robota."
			}

			if (j>50)
			{
				document.getElementById("Hint1").style.display = "none";
				document.getElementById("Hint2").style.display = "block";
				document.getElementById("Logo").style.borderColor = "orange";
				disappearArrows();

			}
			if (j<3)
			{
				if (choice == glitch[j])
				{
					j+=1;
				}
				else
				{
					j+=4;
				}
			}

			if (j==3)
			{
				makeGlitch();
				return;
			}

			if (j>3 && j<100)
			{
				j += 4;
			}

			k = (getRandomInt(3) + k) % 4;
			if (k==0)
			{
				k = 4;
			}
			document.getElementById("PathImage").src = "WoodsImg/Path" + k + ".png";
		}

		function disappearArrows() {
			document.getElementById("ArrowsDiv").style.display = "none";
		}

		function robotComeback() {
			disappearArrows();
			document.getElementById("TwoTap").style.display = "block";
		}

		function makeGlitch() {
			document.getElementById("MainDiv").style.display = "none";
			document.body.style.backgroundColor = "black";
			document.getElementById("GlitchDiv").style.display = "block";
			document.getElementById("Logo").style.borderColor = "red";
		}

		let h=3;
		var intervalID;

		function glitchButton() {
			h -= 1;
			if (h==0)
			{
				document.getElementById("GlitchButtonDiv").style.display = "none";
				intervalID = setInterval(glitchPathChoose, 2500);
			}
		}

		function glitchPathChoose() {
			clearInterval(intervalID);
			document.getElementById("GlitchPathChooseDiv").style.display = "grid";
		}

		let correct = [1, 2, 3, 3, 1, 4];
		let i=0;
		let arrowsActive = true;

		function clickArrow(arrow) {
			if (arrow == correct[i])
			{
				i += 1;
			}
			else
			{
				i=0;
			}
			if (arrowsActive == true)
			{
				document.getElementById("PowerImage").src = "WoodsImg/Power" + i + ".png";
			}
			if (i == 6)
			{
				wellDone();
				return;
			}
		}

		function wellDone() {
			arrowsActive = false;
			document.getElementById("WellDoneDiv").style.display = "block";
		}

	</script>
</head>
<body>
	<div class="middle-div">
		<img id="Logo" src="ManiacyGier.jpg" alt="upsi">
	</div>
	<div class="middle-div" id="MainDiv">
		<div id="ReturnButtonDiv">
			<button class="button-5" onclick="mainHall()">Powrót</button>
		</div>
		<h1 id="welcome-p" class="miejsce-W">Furtka Leśna</h1>
		<br>
		<h3 class="narrate">
			Podchodzisz do "Furtki Leśnej" przygotowana na najgorsze. Bierzesz głęboki wdech, zbierasz w sobie siły i dotykasz portalu. Natychmiast zostajesz pochłonięta przez 
			coś, co wygląda jak tunel czasoprzestrzenny (czytałaś o tym w książce) i pędzisz przez niego z niesamowitą, wydawałoby się, prędkością. Wtem jednak pojawia się przed tobą robot. 
			Wydaje ci się, że stoi on w miejscu, jednak nie jesteś w stanie go wyprzedzić. On cały czas znajduje się przed tobą. W końcu zaczyna wydawać z siebie piskliwe dźwięki 
		</h3>
		<h3 class="robot">bip bop bUP bep</h3>
		<h3 class="narrate">
			Hmm, chyba nie tak powinien działać robot. Czy coś jest z nim nie tak? Czy tak właśnie ma działać? Zadajesz sobie takie i podobne pytania dzięki czemu nawet nie zauważasz 
			nawet kiedy	minęła podróż. Dookoła ciebie nagle wyrasta multum drzew i krzaków, ty sama zaś znajdujesz się w niczym niewyróżniającym się miejscu. Nieopodal jednak, za dwoma 
			krzakami i trzema drzewami dostrzegasz ścieżkę. Gdy chcesz już do niej podejść i zobaczyć gdzie prowadzi, o swojej obecności przypomina ci robot
		</h3>
		<h3 class="robot">bLEp bWoOot kRIt GooooHhhhhh Tot</h3>
		<h3 class="narrate">
			Musisz przyznać, że chyba jest z nim coraz gorzej. Dźwięki są coraz bardziej nieprzewidywalne i nie wiesz, czy może zaraz nie wybuchnie. Może więc warto mu pomóc? 
			Z drugiej strony, może wcale go nie potrzebujesz. Widzisz ścieżkę przed sobą i masz szansę poradzić sobie sama.
		</h3>
		<h3 class="narrate">Po chwili na przemyślenia jesteś gotów podjąć decyzję.</h3>
		<div id="Button2Div">
			<button id="B1" class="button-5" onclick="oneClick()" style="width:200px; height: 100px;">Idziesz ścieżką</button>
			<button id="B2" class="button-5" onclick="twoClick()" style="width:200px; height: 100px;">Pomagasz robotowi</button>
		</div>
		<div id="OneTap" style="display: none">
			<h3 class="narrate">
				Niepotrzebny ci żaden robot. W końcu co może cię czekać w wyimaginowanym lesie propagującym nadprzyrodzone byty bez żadnego sensownego porządku? Ruszasz 
				zatem ścieżką, jednak na każdym skrzyżowaniu musisz podjąć decyzję - gdzie teraz?
			</h3>
			<img id="PathImage" class="obrazekWoods" src="WoodsImg/Path1.png" alt="path">
			<div id="ArrowsDiv" style="display: grid; grid-template-columns: auto auto auto;">
				<button class="button-5" onclick="choosePath(1)">&#8592</button>
				<button class="button-5" onclick="choosePath(2)">&#8593</button>
				<button class="button-5" onclick="choosePath(3)">&#8594</button>
			</div>
			<div id="HintDiv" style="display: none">
				<h3 id="Hint1" class="narrate">
					Zdaje się, że układ ścieżek zmienia się z każdym kolejnym wyborem. Może jednak warto wrócić po tego robota?
				</h3>
				<h1 id="Hint2" style="display: none;">Wróć po robota.</h1>
				<button class="button-5" onclick="robotComeback()">Wróć</button>
			</div>
		</div>
		<div id="TwoTap" style="display: none">
			<h3 class="narrate">
				Decydujesz się w końcu pójść po robota. Tak, to wygląda jak dobra decyzja! Podchodzisz zatem do niego wciąż słuchając drażniących odgłosów
			</h3>
			<h3 class="robot">PRrrrruh ftAh bWliggO</h3>
			<h3 class="narrate">
				Ok... co my tu mamy. Przyglądając się robotowi próbujesz znaleźć coś, co pomogłoby ci go zrozumieć. Widzisz, oczywiście, jego głowę, parę mechanicznych rąk, gąsienice, na których 
				powinien się poruszać.. standardowe wyposażenie robota. Przyglądasz się zatem dokładniej. Jego oczy zdają się łagodnie świecić, ale nie widać żadnych innych śladów życia. 
				A raczej bycia włączonym. Przechodzisz więc na tyły robota i dopiero tam zauważasz niewielkie metalowe drzwiczki. Po ich otwarciu widzisz przed sobą 4 przyciski, które 
				reprezentują 4 strzałki. Ok, Ok, z tym już da się coś robić. Tylko co? Gdy zadajesz sobie te pytania, robot ponownie wydaje swoje dźwięki
			</h3>
			<h3 class="robot">beeeep boooop GÓRA wop DOWN</h3>
			<h3 class="narrate">
				Hmm, te dźwięki wydawały się już mieć sens. Czy to znaczy, że robot od początku próbował coś powiedzieć? Jest na to całkiem spora szansa. Widzisz przed sobą 4 strzałki, 
				tylko wciąż nie wiesz jakiej kombinacji użyć. Może właśnie to chciał przekazać robot? Do tego trzeba rozszyfrować wiadomość od samego początku.
			</h3>

			<div class="arrow4div">
				<p></p> <button class="button-5" onclick="clickArrow(1)">&#8593</button> <p></p>
				<button class="button-5" onclick="clickArrow(2)"> &#8592 </button> <p></p> <button class="button-5" onclick="clickArrow(3)"> &#8594</button>
				<p></p> <button class="button-5" onclick="clickArrow(4)">&#8595</button> <p></p>
			</div>
			<img id="PowerImage" src="WoodsImg/Power0.png" alt="POWER image" style="height: 100px; width: 325px; margin-top: 10px;">

			<div id="WellDoneDiv" style="display: none;">
				<h3 class="narrate">
					Po kliknięciu odpowiednich strzałek robot się resetuje.
				</h3>
				<button id="ForwardButton" class="button-5" style="display: block; width: 250px;" onclick="window.location.href='Woods2.html'">Podążaj za robotem</button>
			</div>
		</div>
	</div>
	<div id="GlitchDiv" class="middle-div" style="display: none; margin-top: 30px;">
		<img id="PathImageGlitch" class="obrazekWoodsGlitch" src="WoodsImg/droga.png" alt="path">
		<div id="GlitchButtonDiv" style="display: grid; grid-template-columns: auto auto auto; width: 500px; margin: auto; margin-top: 10px">
			<button class="button-5" onclick="glitchButton()">&#8592</button>
			<button class="button-5" onclick="glitchButton()">&#8593</button>
			<button class="button-5" onclick="glitchButton()">&#8594</button>
		</div>
		<div id="GlitchPathChooseDiv" style="display: none; grid-template-columns: auto auto; width: 500px; margin: auto">
			<button class="button-5" onclick="window.location.href='Woods2.html'" style="background-color: rgb(77, 6, 77); color: red">1</button>
			<button class="button-5" onclick="window.location.href='Woods2.html'" style="background-color: rgb(77, 6, 77); color: red">2</button>
		</div>
	</div>
</body>
</html>