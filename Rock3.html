<!DOCTYPE html> 
<html> 
<head>
	<meta charset="utf-8"> 
	<title>Skarbiec Maniaków Gier</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link rel="icon" href="ManiacyGier.jpg">
	<style>
		body {
			background-color: #331205;
		}
	</style>
	<script>
		function mainHall() {
			window.location.href = "The_Main_Hall.html";
		}


		var poj8 = 8;
		var poj3 = 0;
		var poj5 = 0;
		var activeBucket = 0;
		var activeBucketObject;

		function setActiveBucket(b) {
			if (b == activeBucket)
			{
				setActiveBucket(0);
				return;
			}

			if (activeBucket != 0)
			{
				activeBucketObject = document.getElementById("pojemnik"+activeBucket);
				activeBucketObject.style.border = "3px solid gray";
				activeBucketObject.style.zIndex = "0";
			}

			activeBucket = b;
			
			if (b == 0)
			{
				return;
			}
			
			activeBucketObject = document.getElementById("pojemnik"+activeBucket);
			activeBucketObject.style.border = "3px solid yellow"
			activeBucketObject.style.zIndex = "1";
		}

		function swapLiquidFunction(pojIn, inID) {
			let type = 0;
			if (activeBucket == 3){
				pojOut = poj3;
				switch(inID)
				{
				case 3:
					type = 0;
					break;
				case 5:
					type = 5;
					break;
				case 8:
					type = 2;
					break;
				}
			}
			if (activeBucket == 5){
				pojOut = poj5;
				switch(inID)
				{
				case 5:
					type = 0;
					break;
				case 3:
					type = 3;
					break;
				case 8:
					type = 6;
					break;
				}
			}
			if (activeBucket == 8){
				pojOut = poj8;
				switch(inID)
				{
				case 8:
					type = 0;
					break;
				case 5:
					type = 4;
					break;
				case 3:
					type = 1;
					break;
				}
			}

			let cap = inID;
			swapLiquid(pojOut, pojIn, cap, type)
		}

		function swapLiquid(from, to, cap, type) {
			cap = cap - to;
			var amount = cap;
			if (from <= cap)
			{
				amount = from;
			}
			
			var pojemnik8 = document.getElementById("pojemnik8");
			var pojemnik3 = document.getElementById("pojemnik3");
			var pojemnik5 = document.getElementById("pojemnik5");

			if (type == 0) {
				setActiveBucket(0);
			}

			if (type == 1) {
				poj8 -= amount;
				poj3 += amount;
				pojemnik8.src = "PojemnikiLitr/Pojemnik8_" + poj8 + ".png";
				pojemnik3.src = "PojemnikiLitr/Pojemnik3_" + poj3 + ".png";
				setActiveBucket(0);
			}
			if (type == 2) {
				poj3 -= amount;
				poj8 += amount;
				pojemnik3.src = "PojemnikiLitr/Pojemnik3_" + poj3 + ".png";
				pojemnik8.src = "PojemnikiLitr/Pojemnik8_" + poj8 + ".png";
				setActiveBucket(0);
			}
			if (type == 3) {
				poj5 -= amount;
				poj3 += amount;
				pojemnik5.src = "PojemnikiLitr/Pojemnik5_" + poj5 + ".png";
				pojemnik3.src = "PojemnikiLitr/Pojemnik3_" + poj3 + ".png";
				setActiveBucket(0);
			}
			if (type == 4) {
				poj8 -= amount;
				poj5 += amount;
				pojemnik8.src = "PojemnikiLitr/Pojemnik8_" + poj8 + ".png";
				pojemnik5.src = "PojemnikiLitr/Pojemnik5_" + poj5 + ".png";
				setActiveBucket(0);
			}
			if (type == 5) {
				poj3 -= amount;
				poj5 += amount;
				pojemnik5.src = "PojemnikiLitr/Pojemnik5_" + poj5 + ".png";
				pojemnik3.src = "PojemnikiLitr/Pojemnik3_" + poj3 + ".png";
				setActiveBucket(0);
			}
			if (type == 6) {
				poj5 -= amount;
				poj8 += amount;
				pojemnik8.src = "PojemnikiLitr/Pojemnik8_" + poj8 + ".png";
				pojemnik5.src = "PojemnikiLitr/Pojemnik5_" + poj5 + ".png";
				setActiveBucket(0);
			}

			if (poj8 == 4 || poj3 == 4 || poj5 == 4)
			{
				document.getElementById("Sukces").style.display = "block";
				document.getElementById("SukcesNarrate").style.display = "block";
				document.getElementById("ForwardButton").style.display = "block";
			}
		}

	</script>
</head>
<body>
	<div class="middle-div">
		<img id="Logo" src="ManiacyGier.jpg" alt="upsi">
	</div>
	<div class="middle-div" id="MainDiv">
		<div id="ReturnButtonDiv">
			<button class="button-5" onclick="mainHall()">Powrót</button>
		</div>
		<h1 id="welcome-p" class="miejsce">Jaskinia Skalna</h1>
		<br>
		<h3 class="narrate">
			Rozwiązawszy zagadkę zaczynasz wszystko łączyć w całość. Skoro między tobą a fragmentem klucza stoi jedynie ściana bruku, a antyczne hieroglify sugerują, żeby zbudować własny kilof... 
			Jedyne, czego teraz potrzebujesz, to 3 kamyki i 2 patyki! Tyle wystarczy, żeby zrobić kilof, prawda? Spędzasz kilka chwil na przeszukiwaniu podłogi jaskini, szukając potrzebnych ci 
			materiałów. Gdy zebrałaś wszystkie niezbędne części, zasnatawiasz się co teraz. Przydałby się stół rzemieślniczy, zatem wyruszasz w jego poszukiwaniu do jeszcze ciemniejszej części jaskini. 
			Zauważasz tam coś, co rzeczywiście przypomina stół, jednak to, co się na nim znajduje, wprawia cię w małe zaskoczenie. Nie ma tam wcale narzędzi, a zamiast tego trzy pojemniki, każdy innego 
			rozmiaru. Tylko jeden z nich, ten, mający 8 litrów pojemności, jest wypełniony jakimś dziwnym płynem po brzegi. Pozostałe dwa, o pojemności odpowiednio 3 i 5 litrów, stoją puste. Na stole 
			jest również notka mówiąca o tym ile płynu potrzeba do jakiej wielkości przedmiotów. Wśród wymienionych możliwości jest również coś co wygląda znajomo: obrazek 3 kamyków i 2 patyków, zaś 
			obok dopisek - 4l. No dobra, skoro wszystko prowadzi tutaj, to nieważne co się stanie, chyba trzeba tego czegoś spróbować. Tylko jak wydobyć z tych pojemników dokładnie 4l? Wolisz nie 
			nadwyrężać cierplliowości stołu próbując różnych innych kombinacji. Skoro pojemniki mają dokładnie 8, 3 i 5 litrów, to chyba należy poprzelewać płyn z jednego do innych, żeby jakoś osiągnąć 
			upragnione 4l. Tylko jak to zrobić?
		</h3>
		<div id="ElemDiv3" style="border: 5px solid; border-color:rgb(72, 13, 13)">
			<img id="pojemnik8" src="PojemnikiLitr/Pojemnik8_8.png" alt="pojemnik8" style="border: 3px solid gray">
			<img id="pojemnik3" src="PojemnikiLitr/Pojemnik3_0.png" alt="pojemnik3" style="border: 3px solid gray">
			<img id="pojemnik5" src="PojemnikiLitr/Pojemnik5_0.png" alt="pojemnik5" style="border: 3px solid gray">
		</div>
		<br>
		<div id="ButtonRock3">
			<button class="button-5" onclick="setActiveBucket(8)">^</button>
			<button class="button-5" onclick="setActiveBucket(3)">^</button>
			<button class="button-5" onclick="setActiveBucket(5)">^</button>
			<button class="button-5" onclick="swapLiquidFunction(poj8, 8)">V</button>
			<button class="button-5" onclick="swapLiquidFunction(poj3, 3)">V</button>
			<button class="button-5" onclick="swapLiquidFunction(poj5, 5)">V</button>
		</div>
		<h3 id="Sukces" style="color: rgb(127, 199, 20); display: none">Mam to!</h3>
		<div id="SukcesNarrate" style="display:none;">
			<h3  class="narrate">
				Udało ci się odmierzyć dokładne 4 litry! Niektóre z najtęższych umysłów miały problem z rozwiązaniem tego kłopotu, ale ty sama nawet przez moment nie wątpiłaś we własny sukces. 
				Wylewasz idealnie odmierzone 4 litry substancji na swoje kamyki i patyki. Dziwny płyn zdaje się nabierać dziwinie materialną postać. Niby-sznurki zaczynają się wyłań z płynu, 
				łącząc ze sobą poszczególne materiały, jednak nim jesteś w stanie dojrzeć coś więcej, ciemnozielona chmura dymu przysłania ci całą scenę. Gdy po chwili opada, widzisz na stole 
				gotowy kilof. Niech i tak będzie. Zadowolona z siebie, rzucasz ostatni rzut oka na stół i ruszasz spowrotem do fragmentu klucza i ściany bruku.
			</h3>
			<img src="RockImg/Stol1.png" alt="stol" class="obrazekMinecraftRock">
		</div>
		<button id="ForwardButton" class="button-5" style="display: none; width: 250px;" onclick="window.location.href='RockFinal.html'">Zabieramy się do kopania!</button>
	</div>
</body>
</html>